

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Run Data Pipeline &mdash; SIGLA Tools 0.1.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Run External Link Checker" href="run_external_link_checker.html" />
    <link rel="prev" title="Document Store Schema" href="document_store_schema.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> SIGLA Tools
          

          
          </a>

          
            
            
              <div class="version">
                0.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#stable-release">Stable release</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#from-sources">From sources</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Package modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="siglatools.html">siglatools package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="siglatools.html#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="siglatools.bin.html">siglatools.bin package</a></li>
<li class="toctree-l4"><a class="reference internal" href="siglatools.databases.html">siglatools.databases package</a></li>
<li class="toctree-l4"><a class="reference internal" href="siglatools.institution_extracters.html">siglatools.institution_extracters package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="siglatools.html#module-siglatools">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="document_store_schema.html">Document Store Schema</a><ul>
<li class="toctree-l2"><a class="reference internal" href="document_store_schema.html#institutions">Institutions</a></li>
<li class="toctree-l2"><a class="reference internal" href="document_store_schema.html#variables">Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="document_store_schema.html#rights">Rights</a></li>
<li class="toctree-l2"><a class="reference internal" href="document_store_schema.html#amendments">Amendments</a></li>
<li class="toctree-l2"><a class="reference internal" href="document_store_schema.html#body-of-laws">Body of Laws</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Run Data Pipeline</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#command-line">Command line</a></li>
<li class="toctree-l2"><a class="reference internal" href="#github-actions-for-collaborators-only">GitHub Actions (for collaborators+ only)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#debugging-data-pipeline-logs">Debugging Data Pipeline Logs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="run_external_link_checker.html">Run External Link Checker</a><ul>
<li class="toctree-l2"><a class="reference internal" href="run_external_link_checker.html#command-line">Command line</a></li>
<li class="toctree-l2"><a class="reference internal" href="run_external_link_checker.html#github-actions-for-collaborators-only">GitHub Actions (for collaborators+ only)</a></li>
<li class="toctree-l2"><a class="reference internal" href="run_external_link_checker.html#external-links-reasons">External Links Reasons</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="get_next_uv_dates.html">Get next update and verify dates</a><ul>
<li class="toctree-l2"><a class="reference internal" href="get_next_uv_dates.html#command-line">Command line</a></li>
<li class="toctree-l2"><a class="reference internal" href="get_next_uv_dates.html#github-actions-for-collaborators-only">GitHub Actions (for collaborators+ only)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="run_qa_test.html">Run QA Test</a><ul>
<li class="toctree-l2"><a class="reference internal" href="run_qa_test.html#command-line">Command line</a></li>
<li class="toctree-l2"><a class="reference internal" href="run_qa_test.html#github-actions-for-collaborators-only">GitHub Actions (for collaborators+ only)</a></li>
<li class="toctree-l2"><a class="reference internal" href="run_qa_test.html#qa-test-artifact-zip-file">QA Test Artifact Zip File</a></li>
<li class="toctree-l2"><a class="reference internal" href="run_qa_test.html#spreadsheet-ids-format">Spreadsheet Ids Format</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#get-started">Get Started!</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#deploying">Deploying</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SIGLA Tools</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Run Data Pipeline</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/run_data_pipeline.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="run_external_link_checker.html" class="btn btn-neutral float-right" title="Run External Link Checker" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
      
      
        <a href="document_store_schema.html" class="btn btn-neutral float-left" title="Document Store Schema" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="run-data-pipeline">
<h1>Run Data Pipeline<a class="headerlink" href="#run-data-pipeline" title="Permalink to this headline">¶</a></h1>
<div class="section" id="command-line">
<h2>Command line<a class="headerlink" href="#command-line" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>Install the package with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install siglatools
</pre></div>
</div>
</li>
<li><p>Run the following command with the correct configurations.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>run_sigla_pipeline -msi &lt;master_spreadsheet_id&gt; -dbcu &lt;db_connection_url&gt; -gacp /path/to/google-api-credentials.json
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="github-actions-for-collaborators-only">
<h2>GitHub Actions (for collaborators+ only)<a class="headerlink" href="#github-actions-for-collaborators-only" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>Visit <a class="reference external" href="https://github.com/SIGLA-GU/siglatools/issues/new/choose">https://github.com/SIGLA-GU/siglatools/issues/new/choose</a></p></li>
<li><p>Get started with Run Staging Pipeline to run the staging pipeline, or with Run Production Pipeline to run the production pipeline</p></li>
<li><p>Add an appropriate title and in the body of the issue write about the key changes to the data</p></li>
<li><p>Click Submit New Issue</p></li>
<li><p>Go to the <a class="reference external" href="https://github.com/SIGLA-GU/siglatools/actions">Actions</a> tab and see the pipeline in progress. You can narrow down the workflows by choosing the type of workflows on the left side, either Manual Run Staging Pipepline or Manual Run Production Pipeline. Then find the specific workflow by finding the GitHub issue title in step 3. Click on the workflow to view its details. On the left side, you should see a check beside <code class="docutils literal notranslate"><span class="pre">authorization_and_correct_label</span></code>. And if the pipeline ran succesfully then you should also see a check next to <code class="docutils literal notranslate"><span class="pre">pipeline</span></code>.</p></li>
</ol>
</div>
<div class="section" id="debugging-data-pipeline-logs">
<h2>Debugging Data Pipeline Logs<a class="headerlink" href="#debugging-data-pipeline-logs" title="Permalink to this headline">¶</a></h2>
<p>Access the pipeline’s logs by opening a specific workflow (follow similar instructions in the above step 5) and then on the right side click <code class="docutils literal notranslate"><span class="pre">...</span></code> and select <code class="docutils literal notranslate"><span class="pre">View</span> <span class="pre">raw</span> <span class="pre">logs</span></code>. A successful run of the pipeline is indicated by <code class="docutils literal notranslate"><span class="pre">Flow</span> <span class="pre">run</span> <span class="pre">SUCCESS:</span> <span class="pre">all</span> <span class="pre">reference</span> <span class="pre">tasks</span> <span class="pre">succeeded</span></code> near the end of the logs.</p>
<p>In cases where the pipeline failed, here are potential errors and how to change the PROD Google Sheets to fix them. Search <code class="docutils literal notranslate"><span class="pre">ERROR</span></code> in the logs to find them.</p>
<ul class="simple">
<li><p>TypeError (missing 3 required positional arguments: sheet_title, start_row, and end_row): In the metadata section of a Google Sheet, make sure start_row and end_row have values.</p></li>
<li><p>IncompleteColumnRangeInA1Notation: In the metadata section of a Google Sheet, make sure start_column and end_column have values.</p></li>
<li><p>InvalidRangeInA1Notation: In the metadata section of a Google Sheet, make sure start_column is less than end_column and start_row is less than end_row.</p></li>
<li><p>UnrecognizedGoogleSheetsFormat: In the metadata section of a Google Sheet, make sure the format is one of the accepted Google Sheets Format.</p>
<ul>
<li><p>standard-institution</p></li>
<li><p>institution-and-composite-variable</p></li>
<li><p>composite-variable</p></li>
<li><p>multiple-sigla-answer-variable</p></li>
</ul>
</li>
<li><p>UnableToFindDocument: In the metadata section of a Google Sheet, make sure the variable_heading and variable_name exactly matches the variable heading and variable name of the corresponding Google Sheet’s variable row. For example, in the Constitutional Rights sheet’s metadata section, the variable_heading and variable_name must match the variable heading and variable name of the accompanying Google Sheet’s rights variable row.</p></li>
<li><p>IndexError: There’s probably an illegal non-empty cell in the data section of a Google Sheet.</p></li>
<li><p>HttpError 429: The number of Google Sheets read operations has been exhausted. Maybe wait 15-30 minutes and re-run the pipeline by using the re-run workflow button.</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, To Huynh.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>